{
    "Config": {
        "InstanceType": {
            "Type": "String",
            "Default": "t2.micro",
            "AllowedValues": ["t2.micro", "m1.small", "m1.large"],
            "Description": "Enter t2.micro, m1.small, or m1.large. Default is t2.micro."
        }
    },
    "Resources": {
        "WebSecGrp": {
            "Type": "aws:ec2/securityGroup:SecurityGroup",
            "Properties": {
                "ingress": [
                    {
                        "protocol": "tcp",
                        "fromPort": 80,
                        "toPort": 80,
                        "cidrBlocks": [ "0.0.0.0/0" ]
                    }
                ]
            }
        },
        "WebServer": {
            "Type": "aws:ec2/instance:Instance",
            "Properties": {
                "instanceType": "t2.micro",
                "ami": "ami-a0cfeed8",
                "userData": "let userData =\n`#!/bin/bash\necho 'Hello, World!' > index.html\nnohup python -m SimpleHTTPServer 80 &`;",
                "vpcSecurityGroupIds": [
                    { "Ref": "WebSecGrp" }
                ]
            }
        }
    },
    "Outputs": {
        "InstanceId": {
            "Ref": "WebServer"
        },
        "PublicIp": {
            "Fn::GetAtt": ["WebServer", "publicIp"]
        },
        "PublicHostName": {
            "Fn::GetAtt": ["WebServer", "publicDns"]
        }
    }
}
